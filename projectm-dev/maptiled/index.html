<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tile map example</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        #map {
            border: 1px solid block;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">
        $( document ).ready( function () {
            const canvas = document.getElementById( 'canvas' );
            const ctx = canvas.getContext( '2d' );
            const image = document.getElementById( 'source' );

            const tilemap = new Image();
            tilemap.src = "./tilemap.png";
            tilemap.onload = () => {
                // 20 * 20
                var map = {
                    cols: 8,
                    rows: 8,
                    imgcols: 23,
                    imgrows: 21,
                    tsize: 32,
                    tiles: [
                        1, 1, 1, 1, 69, 1, 1, 1,
                        1, 1, 1, 1, 69, 1, 1, 1,
                        1, 1, 1, 1, 69, 69, 69, 1,
                        1, 1, 1, 1, 1, 1, 69, 1,
                        1, 1, 1, 1, 1, 1, 69, 1,
                        1, 1, 1, 1, 1, 1, 27, 1,
                        1, 1, 1, 1, 1, 1, 69, 1,
                        1, 1, 1, 1, 1, 1, 69, 1
                    ],
                    getTile: function ( col, row ) {
                        return this.tiles[ row * map.cols + col ]
                    }
                };

                for ( var c = 0; c < map.cols; c++ ) {
                    for ( var r = 0; r < map.rows; r++ ) {

                        var tile = map.getTile( c, r );

                        if ( tile === 0 )
                            continue;

                        const tilex = ( tile - 1 ) % map.imgcols;
                        const sx = tilex * map.tsize;
                        const tiley = Math.round( tile / map.imgrows );
                        const sy = tiley * map.tsize;;

                        console.log( `
                        Image tile number: ${tilex} -- ${tiley} \\
                        Image source: tile: ${tile} - x: ${sx} - y:${sy}` );

                        ctx.drawImage(
                            tilemap, // image
                            sx, // source x
                            sy, // source y
                            map.tsize, // source width
                            map.tsize, // source height
                            c * map.tsize, // target x
                            r * map.tsize, // target y
                            map.tsize, // target width
                            map.tsize // target height
                        );
                    }
                }
            }
        } );
    </script>
</head>

<body>

    <canvas id="canvas" height="400px" width="400px"></canvas>

</body>

</html>